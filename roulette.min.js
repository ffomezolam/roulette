!function(t,i,a){"undefined"!=typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):i[t]=a()}("Roulette",this,function(){function t(t,i){return t===i}function i(t,i,a){return{item:t,tally:i,probability:a}}function a(i){this.length=0,this.autocalibrate=i&&"autocalibrate"in i?!!i.autocalibrate:!1,this.aliases=i&&"aliases"in i?!!i.aliases:!1,this._data=[],this._total=0,this._compare=t,this._aliases=this.aliases?{}:null}return a.prototype={add:function(t){if(arguments.length>1){var a=this.autocalibrate;a&&(this.autocalibrate=!1);for(var e=0,s=arguments.length;s>e;e++)this.add(arguments[e]);a&&(this.autocalibrate=!0)}else{if(this.aliases&&"string"!=typeof t&&"number"!=typeof t)return this;var h=this.indexOf(t);0>h?(this._data.push(i(t,1,0)),this.length=this._data.length,this._total++,this.aliases&&(this._aliases[t]=this.length-1)):(this._data[h].tally++,this._total++),this.autocalibrate&&this.calibrate()}return this},remove:function(t){if(arguments.length>1){var i=this.autocalibrate;i&&(this.autocalibrate=!1);for(var a=0,e=arguments.length;e>a;a++)this.remove(arguments[a]);i&&(this.autocalibrate=!0)}else{var s=this.indexOf(t);if(0>s)return this;this._data[s].tally>0&&(this._data[s].tally--,this._total--),this._data[s].tally||(this.aliases&&(delete this._aliases[t],this._realias(s)),this._data.splice(s,1),this.length=this._data.length),this.autocalibrate&&this.calibrate()}return this},purge:function(t){var i=this.indexOf(t);if(0>i)return this;var a=this._data[i].tally;return this._total-=a,this._data.splice(i,1),this.length=this._data.length,this.aliases&&(delete this._aliases[t],this._realias(i)),this.autocalibrate&&this.calibrate(),this},_realias:function(t){if(("number"!=typeof t||0>t)&&(t=0),t>this.length-1)return this;for(var i=t,a=this.length;a>i;i++){var e=this._data[i].item;this._aliases[e]=i}return this},indexOf:function(t){if(!this.length)return-1;if(this.aliases)return t in this._aliases?this._aliases[t]:-1;for(var i=0,a=this.length;a>i;i++){var e=this._data[i].item;if(null!=e&&this._compare(t,e))return i}return-1},has:function(t){return!!(this.indexOf(t)>=0)},get:function(t){if(!this.length)return null;if("number"==typeof t&&t>=0&&t<this.length)return this._data[t].item;var i=Math.random();if(i>=1)return this._data[this.length-1].item;if(0>=i)return this._data[0].item;for(var a=0,e=this.length;e>a;a++){var s=this._data[a].probability;if(s>i)return this._data[a].item}return null},calibrate:function(){if(!this._total)return this;for(var t=0,i=this.length;i>t;t++){var a=this._data[t].tally,e=a/this._total;this._data[t].probability=t?this._data[t-1].probability+e:e}return this},setCompare:function(t){return this._compare=t,this}},a});